C51 COMPILER V9.01   TIME0                                                                 03/30/2023 21:11:45 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE TIME0
OBJECT MODULE PLACED IN .\Objects\Time0.obj
COMPILER INVOKED BY: C:\keil5\C51\BIN\C51.EXE src\Time0.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\src) DEBUG OBJECTEXTEND PRIN
                    -T(.\Listings\Time0.lst) TABS(2) OBJECT(.\Objects\Time0.obj)

line level    source

   1          /**************************************************************************************************
   2          //³ÌÐòÃû³Æ £º¶¨Ê±Æ÷0
   3          //Ó¦ÓÃÐ¾Æ¬ £º
   4          //Éè¼Æµ¥Î» £º
   5          //Éè¼Æ×÷Õß £ºYanggang
   6          //´´½¨ÈÕÆÚ £º2011Äê8ÔÂ8ÈÕ
   7          //ÐÞ¸Ä×÷Õß £º 
   8          //ÐÞ¸ÄÈÕÆÚ £º 
   9          //°æ±¾ £º V1.0
  10          //°æÈ¨ £º
  11          //------------------------------------------------------------------------------------------------
  12          //³ÌÐò¹¦ÄÜÃèÊö £º 
  13          //--------------
  14          //--------------
  15          //--------------
  16          //------------------------------------------------------------------------------------------------
  17          **************************************************************************************************/
  18          
  19          /**************************************************************************************************
  20          ** ±àÒëÔ¤´¦Àí £ºÎÄ¼þ°üº¬£»ºê¶¨Òå£»±äÁ¿ÉùÃ÷£»º¯ÊýÉùÃ÷
  21          ** Ó¦ÓÃÃèÊö £º
  22          ** ÆäËûËµÃ÷ £ºÎÞ
  23          **************************************************************************************************/
  24          
  25          /*---------------°üº¬Í·ÎÄ¼þ--------------------*/
  26          #include"Time0.h"
  27          
  28          /******************************************************************
  29           - ¹¦ÄÜÃèÊö£ºÆô¶¯¶¨Ê±Æ÷0
  30           - Á¥ÊôÄ£¿é£º¶¨Ê±Æ÷Ä£¿é
  31           - º¯ÊýÊôÐÔ£ºÍâ²¿£¬¹©ÓÃ»§Ê¹ÓÃ
  32           - ²ÎÊýËµÃ÷£ºÎÞ      
  33           - ·µ»ØËµÃ÷£ºÎÞ
  34           - ×¢£ºÎÞ
  35           *****************************************************************
  36          
  37          void Time0_Start()
  38          {
  39            TR0=1;     //Æô¶¯¶¨Ê±Æ÷0£¬¶¨Ê±Æ÷0Æô¶¯ºó[TH0-TL0]Á¢¼´´ÓÆä³õÊ¼Öµ¿ªÊ¼×ÔÔö
  40          } 
  41           */
  42          /******************************************************************
  43           - ¹¦ÄÜÃèÊö£ºÍ£Ö¹¶¨Ê±Æ÷0
  44           - Á¥ÊôÄ£¿é£º¶¨Ê±Æ÷Ä£¿é
  45           - º¯ÊýÊôÐÔ£ºÍâ²¿£¬¹©ÓÃ»§Ê¹ÓÃ
  46           - ²ÎÊýËµÃ÷£ºÎÞ      
  47           - ·µ»ØËµÃ÷£ºÎÞ
  48           - ×¢£ºÎÞ
  49           *****************************************************************
  50          
  51          void Time0_Stop()
  52          {
  53            TR0=0;     //Í£Ö¹¶¨Ê±Æ÷0£¬¶¨Ê±Æ÷0Í£Ö¹ºó[TH0-TL0]Á¢¼´Í£Ö¹×ÔÔö
  54          } 
C51 COMPILER V9.01   TIME0                                                                 03/30/2023 21:11:45 PAGE 2   

  55          */
  56          //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -///
  57          //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -///
  58          ////////////////////////////////////¶¨Ê±Æ÷0¹¤×÷·½Ê½0//////////////////////////////////////////////////////
             -//
  59          //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -///
  60          /******************************************************************
  61           - ¹¦ÄÜÃèÊö£º³õÊ¼»¯¶¨Ê±Æ÷0¹¤×÷·½Ê½0
  62           - Á¥ÊôÄ£¿é£º¶¨Ê±Æ÷Ä£¿é
  63           - º¯ÊýÊôÐÔ£ºÍâ²¿£¬¹©ÓÃ»§Ê¹ÓÃ
  64           - ²ÎÊýËµÃ÷£ºÎÞ      
  65           - ·µ»ØËµÃ÷£ºÎÞ
  66           - ×¢£ºÎÞ
  67           ******************************************************************
  68          
  69          void Time0_Init()
  70          {
  71          
  72             TMOD|=0x00;  //È·¶¨¹¤×÷·½Ê½£¬¶ÔTMOD½øÐÐ¸³Öµ£¬ÉèÖÃ¶¨Ê±Æ÷0Îª¹¤×÷·½Ê½0(13Î»¶¨Ê±Æ÷) TH0µÄ8Î»£¬THLµÍ5Î»
  73                          //TMOD----GATE C/T  M1 MO GATE C/T  M1 MO (C/T--¶¨Ê±Æ÷/¼ÆÊýÆ÷Ñ¡ÔñÎ»¡¢GATEÃÅ¿ØÖÆÎ»¡¢M1 M0Î»¹
             -¤×÷·½Ê½Ñ¡ÔñÎ»)
  74             TH0=(8192-value)/32; //¼ÆÊý³õÖµ£¬²¢Ð´ÈëTH0£¬TL0»òTH1£¬TL1 
  75             TL0=(8192-value)%32;
  76            
  77             EA=1;    //´ò¿ª×ÜÖÐ¶Ï(ÒªÊ¹Ä³ÖÐ¶ÏÕæÕýÊ¹ÄÜ£¬³ýÁËÖÃÎ»ÏàÓ¦µÄÖÐ¶ÏÊ¹ÄÜÎ»£¬»¹±ØÐëÖÃÎ»È«¾ÖÖÐ¶ÏÊ¹ÄÜÎ»)             
             -           
  78             ET0=1;   //´ò¿ª¶¨Ê±Æ÷0ÖÐ¶Ï
  79             TR0=1;     //Æô¶¯¶¨Ê±Æ÷0
  80          }
  81          
  82          
  83          
  84          /******************************************************************
  85           - ¹¦ÄÜÃèÊö£º¶¨Ê±Æ÷0ÖÐ¶Ï·þÎñº¯Êý
  86           - Á¥ÊôÄ£¿é£º¶¨Ê±Æ÷Ä£¿é
  87           - º¯ÊýÊôÐÔ£ºÖÐ¶Ïº¯Êý£¬ÓÉÓÃ»§¼ÓÈëÖÐ¶Ï·þÎñ´úÂë
  88           - ²ÎÊýËµÃ÷£ºÎÞ      
  89           - ·µ»ØËµÃ÷£ºÎÞ
  90           - ×¢£º
  91           *****************************************************************
  92          
  93          void Time0() interrupt 1
  94          {
  95             TH0=(8192-value)/32; //¶¨Ê±Æ÷T0¹¤×÷·½Ê½0ÖØ×°³õÖµ 
  96             TL0=(8192-value)%32;
  97             //ÖÐ¶Ï·þÎñ³ÌÐò                   
  98          }
  99          
 100          */
 101          
 102          
 103          
 104          //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -///
 105          //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -///
 106          /////////////////////////////////////////¶¨Ê±Æ÷0¹¤×÷·½Ê½1/////////////////////////////////////////////////
             -//
 107          //////////////////////////////////////////////////////////////////////////////////////////////////////////
C51 COMPILER V9.01   TIME0                                                                 03/30/2023 21:11:45 PAGE 3   

             -///
 108          /******************************************************************
 109           - ¹¦ÄÜÃèÊö£º³õÊ¼»¯¶¨Ê±Æ÷0¹¤×÷·½Ê½1
 110           - Á¥ÊôÄ£¿é£º¶¨Ê±Æ÷Ä£¿é
 111           - º¯ÊýÊôÐÔ£ºÍâ²¿£¬¹©ÓÃ»§Ê¹ÓÃ
 112           - ²ÎÊýËµÃ÷£ºÎÞ      
 113           - ·µ»ØËµÃ÷£ºÎÞ
 114           - ×¢£ºÎÞ
 115           ******************************************************************/
 116          
 117          //void Time0_Init()
 118          //{
 119          
 120          //   TMOD |= 0x01;  //È·¶¨¹¤×÷·½Ê½£¬¶ÔTMOD½øÐÐ¸³Öµ£¬ÉèÖÃ¼ÆÊýÆ÷0Îª¹¤×÷·½Ê½1(16Î»¶¨Ê±Æ÷)
 121          //                //TMOD----GATE C/T  M1 MO GATE C/T  M1 MO (C/T--¶¨Ê±Æ÷/¼ÆÊýÆ÷Ñ¡ÔñÎ»¡¢GATEÃÅ¿ØÖÆÎ»¡¢M1 M0Î
             -»¹¤×÷·½Ê½Ñ¡ÔñÎ»)
 122          //   TH0=(65536-2000)/256;  // 
 123          //   TL0=(65536-2000)%256;  
 124          //    
 125          //   TR0=1;     //Æô¶¯¶¨Ê±Æ÷0
 126          //   ET0=1;   //´ò¿ª¶¨Ê±Æ÷0ÖÐ¶Ï
 127          //   EA=1;    //´ò¿ª×ÜÖÐ¶Ï(ÒªÊ¹Ä³ÖÐ¶ÏÕæÕýÊ¹ÄÜ£¬³ýÁËÖÃÎ»ÏàÓ¦µÄÖÐ¶ÏÊ¹ÄÜÎ»£¬»¹±ØÐëÖÃÎ»È«¾ÖÖÐ¶ÏÊ¹ÄÜÎ»)           
             -             
 128          //   
 129          //   
 130          //}
 131          
 132          
 133          
 134          /******************************************************************
 135           - ¹¦ÄÜÃèÊö£º¶¨Ê±Æ÷0ÖÐ¶Ï·þÎñº¯Êý
 136           - Á¥ÊôÄ£¿é£º¶¨Ê±Æ÷Ä£¿é
 137           - º¯ÊýÊôÐÔ£ºÖÐ¶Ïº¯Êý£¬ÓÉÓÃ»§¼ÓÈëÖÐ¶Ï·þÎñ´úÂë
 138           - ²ÎÊýËµÃ÷£ºÎÞ      
 139           - ·µ»ØËµÃ÷£ºÎÞ
 140           - ×¢£º
 141           ******************************************************************/
 142          
 143          //void Time0() interrupt 1
 144          //{   
 145          //  TH0=(65536-2000)/256;     //ÖØÐÂ¸³Öµ 2ms
 146          //  TL0=(65536-2000)%256;
 147          //  
 148          //  Time++;
 149          //  Tms1++;
 150          //  Tms2++;
 151          //  if(Tms2==300)
 152          //  {
 153          //    Tms2=0;
 154          ////    ReadTempFlag=1;
 155          //  }
 156          //  if(Time>=120*500) //ÉèÖÃ×Ô¶¯¹Ø»úÊ±¼ä"30*500"Îª30S
 157          //  {   
 158          //    Time=0;   
 159          //    TM1650_Send(0X68,0X00);  //GID1  //ÊýÂë¹Ü²»ÏÔÊ¾
 160          //    TM1650_Send(0X6A,0X00);  //GID2
 161          //    TM1650_Send(0X6C,0X00);  //GID3
 162          //    TM1650_Send(0X6E,0X00);  //GID4   
 163          //    Stop_Start=0;   
 164          //    ET0=0;   //¹Ø±ÕÊýÂë¹ÜÏÔÊ¾
 165          //  } 
 166          //}
C51 COMPILER V9.01   TIME0                                                                 03/30/2023 21:11:45 PAGE 4   

 167          
 168          
 169          
 170          
 171          //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -///
 172          //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -///
 173          ///////////////////////////////////////¶¨Ê±Æ÷0¹¤×÷·½Ê½2///////////////////////////////////////////////////
             -///
 174          //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -///
 175          /******************************************************************
 176           - ¹¦ÄÜÃèÊö£º³õÊ¼»¯¶¨Ê±Æ÷0¹¤×÷·½Ê½2
 177           - Á¥ÊôÄ£¿é£º¶¨Ê±Æ÷Ä£¿é
 178           - º¯ÊýÊôÐÔ£ºÍâ²¿£¬¹©ÓÃ»§Ê¹ÓÃ
 179           - ²ÎÊýËµÃ÷£ºÎÞ      
 180           - ·µ»ØËµÃ÷£ºÎÞ
 181           - ×¢£ºÎÞ
 182           ******************************************************************
 183          
 184          void Time0_Init()
 185          {
 186             TMOD|=0x02;  //È·¶¨¹¤×÷·½Ê½£¬¶ÔTMOD½øÐÐ¸³Öµ£¬ÉèÖÃ¶¨Ê±Æ÷0Îª¹¤×÷·½Ê½2(8Î»×Ô¶¯ÖØ×°³õÖµ¶¨Ê±Æ÷)
 187                          //TMOD----GATE C/T  M1 MO GATE C/T  M1 MO (C/T--¶¨Ê±Æ÷/¼ÆÊýÆ÷Ñ¡ÔñÎ»¡¢GATEÃÅ¿ØÖÆÎ»¡¢M1 M0Î»¹
             -¤×÷·½Ê½Ñ¡ÔñÎ»)
 188             TH0=256-value; //¼ÆÊý³õÖµ£¬²¢Ð´ÈëTH0£¬TL0»òTH1£¬TL1 
 189             TL0=256-value;
 190             
 191             EA=1;    //´ò¿ª×ÜÖÐ¶Ï(ÒªÊ¹Ä³ÖÐ¶ÏÕæÕýÊ¹ÄÜ£¬³ýÁËÖÃÎ»ÏàÓ¦µÄÖÐ¶ÏÊ¹ÄÜÎ»£¬»¹±ØÐëÖÃÎ»È«¾ÖÖÐ¶ÏÊ¹ÄÜÎ»)             
             -           
 192             ET0=1;   //´ò¿ª¶¨Ê±Æ÷0ÖÐ¶Ï
 193             TR0=1;     //Æô¶¯¶¨Ê±Æ÷0
 194          }
 195          
 196          /******************************************************************
 197           - ¹¦ÄÜÃèÊö£º¶¨Ê±Æ÷0ÖÐ¶Ï·þÎñº¯Êý
 198           - Á¥ÊôÄ£¿é£º¶¨Ê±Æ÷Ä£¿é
 199           - º¯ÊýÊôÐÔ£ºÖÐ¶Ïº¯Êý£¬ÓÉÓÃ»§¼ÓÈëÖÐ¶Ï·þÎñ´úÂë
 200           - ²ÎÊýËµÃ÷£ºÎÞ      
 201           - ·µ»ØËµÃ÷£ºÎÞ
 202           - ×¢£º
 203           ******************************************************************
 204          
 205          void Time0() interrupt 1
 206          {
 207            //¶¨Ê±Æ÷0¹¤×÷ÔÚ¹¤×÷·½Ê½2Îª×Ô¶¯ÖØ×°³õÖµ¹¤×÷·½Ê½²»ÐèÖØ×°³õÖµ
 208            //ÖÐ¶Ï·þÎñ³ÌÐò                    
 209          }
 210          */
 211          
 212          
 213          //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -///
 214          //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -///
 215          ///////////////////////////////////////¶¨Ê±Æ÷0¹¤×÷·½Ê½3///////////////////////////////////////////////////
             -///
 216          //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -///
 217          /******************************************************************
 218           - ¹¦ÄÜÃèÊö£º³õÊ¼»¯¶¨Ê±Æ÷0¹¤×÷·½Ê½3
C51 COMPILER V9.01   TIME0                                                                 03/30/2023 21:11:45 PAGE 5   

 219           - Á¥ÊôÄ£¿é£º¶¨Ê±Æ÷Ä£¿é
 220           - º¯ÊýÊôÐÔ£ºÍâ²¿£¬¹©ÓÃ»§Ê¹ÓÃ
 221           - ²ÎÊýËµÃ÷£ºÎÞ      
 222           - ·µ»ØËµÃ÷£ºÎÞ
 223           - ×¢£ºÎÞ
 224           ******************************************************************
 225          
 226          void Time0_Init()
 227          {
 228          /////×¢£º¶¨Ê±Æ÷0¹¤×÷ÔÚ¹¤×÷·½Ê½3Ê±Õ¼ÓÃ¶¨Ê±Æ÷1µÄÖÐ¶Ï·þÎñº¯Êý£¬´ËÊ±Í¨³£½«¶¨Ê±Æ÷1ÓÃ×÷´®ÐÐ¿ÚµÄ²¨ÌØÂÊ·¢ÉúÆ÷
 229             TMOD|=0x03;  //È·¶¨¹¤×÷·½Ê½£¬¶ÔTMOD½øÐÐ¸³Öµ£¬ÉèÖÃ¶¨Ê±Æ÷0Îª¹¤×÷·½Ê½3(8Î»¶¨Ê±Æ÷,¿É¹¹³ÉÁ½¸ö¶¨Ê±Æ÷»òÒ»¸ö¶¨Ê±
             -Æ÷Ò»¸ö¼ÆÊýÆ÷)
 230                          //TMOD----GATE C/T  M1 MO GATE C/T  M1 MO (C/T--¶¨Ê±Æ÷/¼ÆÊýÆ÷Ñ¡ÔñÎ»¡¢GATEÃÅ¿ØÖÆÎ»¡¢M1 M0Î»¹
             -¤×÷·½Ê½Ñ¡ÔñÎ»)
 231             TH0=256-value; //¼ÆÊý³õÖµ£¬½øÈë¶¨Ê±Æ÷1µÄÖÐ¶Ï·þÎñº¯Êý
 232             TL0=256-value; //¼ÆÊý³õÖµ£¬½øÈë¶¨Ê±Æ÷0µÄÖÐ¶Ï·þÎñº¯Êý
 233          
 234             
 235             EA=1;    //´ò¿ª×ÜÖÐ¶Ï(ÒªÊ¹Ä³ÖÐ¶ÏÕæÕýÊ¹ÄÜ£¬³ýÁËÖÃÎ»ÏàÓ¦µÄÖÐ¶ÏÊ¹ÄÜÎ»£¬»¹±ØÐëÖÃÎ»È«¾ÖÖÐ¶ÏÊ¹ÄÜÎ»)             
             -           
 236             ET0=1;   //´ò¿ª¶¨Ê±Æ÷0ÖÐ¶Ï
 237             ET1=1;   //´ò¿ª¶¨Ê±Æ÷1ÖÐ¶Ï
 238             TR0=1;     //Æô¶¯¶¨Ê±Æ÷0
 239             TR1=1;     //Æô¶¯¶¨Ê±Æ÷0µÄ¸ß8Î»¼ÆÊýÆ÷
 240          }
 241          
 242          /******************************************************************
 243           - ¹¦ÄÜÃèÊö£º¶¨Ê±Æ÷0ÖÐ¶Ï·þÎñº¯Êý
 244           - Á¥ÊôÄ£¿é£º¶¨Ê±Æ÷Ä£¿é
 245           - º¯ÊýÊôÐÔ£ºÖÐ¶Ïº¯Êý£¬ÓÉÓÃ»§¼ÓÈëÖÐ¶Ï·þÎñ´úÂë
 246           - ²ÎÊýËµÃ÷£ºÎÞ      
 247           - ·µ»ØËµÃ÷£ºÎÞ
 248           - ×¢£º
 249           ******************************************************************
 250          
 251          void Time0() interrupt 1
 252          {
 253            TL0=256-value;//ÖØ×°³õÖµ
 254            //ÖÐ¶Ï·þÎñ³ÌÐò                   
 255          }
 256          
 257          
 258          /******************************************************************
 259           - ¹¦ÄÜÃèÊö£º¶¨Ê±Æ÷1ÖÐ¶Ï·þÎñº¯Êý
 260           - Á¥ÊôÄ£¿é£º¶¨Ê±Æ÷Ä£¿é
 261           - º¯ÊýÊôÐÔ£ºÖÐ¶Ïº¯Êý£¬ÓÉÓÃ»§¼ÓÈëÖÐ¶Ï·þÎñ´úÂë
 262           - ²ÎÊýËµÃ÷£ºÎÞ      
 263           - ·µ»ØËµÃ÷£ºÎÞ
 264           - ×¢£º
 265           *******************************************************************
 266          
 267          void Time1() interrupt 3
 268          {
 269            TH0=256-value;//ÖØ×°³õÖµ
 270            //ÖÐ¶Ï·þÎñ³ÌÐò                     
 271          }
 272          */
 273          
 274          
 275          


C51 COMPILER V9.01   TIME0                                                                 03/30/2023 21:11:45 PAGE 6   

MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   ----    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
